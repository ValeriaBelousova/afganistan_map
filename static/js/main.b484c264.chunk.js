(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{25:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(13),r=a.n(o),c=a(10),l=a(12),i=[{id:"map",zoom:4,center:[34.53278,69.16583],style:"https://api.mapbox.com/styles/v1/valeriabelousova/ckko1s46x69o217o2qi6rtrg2/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoidmFsZXJpYWJlbG91c292YSIsImEiOiJjanBmMmt0c2cwNjQyM3FsZ2gzY2dvemNvIn0.skr82NeiNVFPUi-zxKKqiw",bounds:[],polygonsArr:{},polygons:[],zoom_change:!1},{id:"basemap",level:"M10",level_name:"1:100 000 000",style:"rikNews",export_size:2e3,downloadChecked:!1},{id:"afganistan",visible:!1,status_date:"neutral",visible_poly:!1,visible_poi:!1,downloadChecked:!1}],u={M10:"1:100 000 000",M05:"1:50 000 000",M01:"1:10 000 000",M500:"1:500 000",M200:"1:200 000"},d=Object(l.b)({layers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"BOUNDS_CHANGE":return e.map((function(e){return"map"===e.id&&(e.bounds=t.payload.layerBounds),e}));case"ADD_SHAPES":case"DELETE_SHAPES":return e.map((function(e){return"map"===e.id&&(e.polygons=t.payload.shapes),e}));case"ADD_POLYGONS_ARR":return e.map((function(e){return"map"===e.id&&(e.polygonsArr=t.payload.polygonsArr),e}));case"MAP_ZOOM_CHANGE":return e.map((function(e){return"map"===e.id&&(e.zoom=t.payload.zoom),e}));case"MAP_CENTER_CHANGE":return e.map((function(e){return"map"===e.id&&(e.center=t.payload.center),e}));case"MAP_ZOOM_CHANGE_MANUALLY":return e.map((function(e){return"map"===e.id&&(e.zoom_change=t.payload.checkboxChecked),e}));case"BASEMAP_BUTTON_PUSH":return e.map((function(e){return"basemap"===e.id&&(e.downloadChecked=t.payload.downloadCheckedButton),e}));case"BASEMAP_LEVEL_CHOOSE":return e.map((function(e){return"basemap"===e.id&&(e.level=t.payload.levelChecked,e.level_name=u[t.payload.levelChecked]),e}));case"BASEMAP_STYLE_CHOOSE":return e.map((function(e){return"map"===e.id&&(e.style=t.payload.style),e}));case"BASEMAP_STYLEEXPORT_CHOOSE":return e.map((function(e){return"basemap"===e.id&&(e.style=t.payload.styleChecked),e}));case"BASEMAP_CHANGE_EXPORT_SIZE":return e.map((function(e){return"basemap"===e.id&&(e.export_size=t.payload.export_size),e}));case"AFGANISTAN_BUTTON_PUSH":return e.map((function(e){return"afganistan"===e.id&&(e.visible=t.payload.downloadCheckedButton),e}));case"AFGANISTAN_STATUS_DATE":return e.map((function(e){return"afganistan"===e.id&&(e.status_date=t.payload.status_date),e}));default:return e}}}),j=d,p=Object(l.c)(j),h=(a(41),a(25),a(55)),b=a(56),m=a(47),_=a(51),O=a(52),y=a(49),x=a(53),g=a(54),f=function(e){return{type:"BOUNDS_CHANGE",payload:{layerBounds:e}}},v=function(e){return{type:"MAP_ZOOM_CHANGE",payload:{zoom:e}}},A=function(e){return console.log(e),{type:"BASEMAP_LEVEL_CHOOSE",payload:{levelChecked:e}}},w=a(27),S=a(28),N=a(31),C=a(30),k=a(48),E=a(50),z=a(3),B=a.n(z),M=a(0),P=function(e){Object(N.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).myStyle=function(e){return{color:"white",weight:1,fillOpacity:1,fillColor:e.properties.color}},n.neutralStyle=function(e){return{color:"#9ea4c8",weight:1,fillOpacity:1,fillColor:"white"}},n.state={status_date:"neutral",data:[]},console.log("contructor poly"),n}return Object(S.a)(a,[{key:"render",value:function(){var e=this;return console.log("render poly"),Object(M.jsx)(m.a,{children:this.state.data.map((function(t){return"neutral"===e.state.status_date?Object(M.jsx)(k.a,{data:t,style:e.neutralStyle(t),children:Object(M.jsx)(y.a,{children:Object(M.jsx)(E.a,{striped:!0,bordered:!0,hover:!0,children:Object(M.jsxs)("tbody",{children:[Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:"\u0420\u0435\u0433\u0438\u043e\u043d"}),Object(M.jsx)("td",{children:t.properties.name_1})]}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:"\u0420\u0430\u0439\u043e\u043d"}),Object(M.jsx)("td",{children:t.properties.name_2})]})]})})})},t.properties.objectid):"1_may_2021"===e.state.status_date||"june_2021"===e.state.status_date||"july_2021"===e.state.status_date||"august_2021"===e.state.status_date||"september_2021"===e.state.status_date?Object(M.jsx)(k.a,{data:t,style:e.myStyle(t),children:Object(M.jsx)(y.a,{children:Object(M.jsx)(E.a,{striped:!0,bordered:!0,hover:!0,children:Object(M.jsxs)("tbody",{children:[Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:"\u0420\u0435\u0433\u0438\u043e\u043d"}),Object(M.jsx)("td",{children:t.properties.name_1})]}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:"\u0420\u0430\u0439\u043e\u043d"}),Object(M.jsx)("td",{children:t.properties.name_2})]}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(M.jsx)("td",{children:t.properties.status})]})]})})})},t.properties.objectid):void 0}))})}},{key:"componentDidMount",value:function(){this.props.url&&this.fetchData(this.props.url),this.setState({status_date:this.props.id})}},{key:"componentWillUnmount",value:function(){console.log("will unmount")}},{key:"fetchData",value:function(e){var t=this;fetch(e).then((function(e){return e.json()})).then((function(e){t.setState({data:e.features})}),(function(e){console.error(e)}))}}]),a}(s.a.Component),T=(a(43),new B.a.Icon({iconUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_icon_nato_leave.png",iconRetinaUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_icon_nato_leave.png",iconAnchor:new B.a.Point(50,82),popupAnchor:new B.a.Point(160,-15),shadowUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_icon_nato_leave.png",shadowSize:new B.a.Point(50,82),shadowAnchor:new B.a.Point(50,82),iconSize:new B.a.Point(50,82),className:"leaflet-div-icon"})),U=new B.a.Icon({iconUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_red_cirlce_icon.png",iconRetinaUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_red_cirlce_icon.png",iconAnchor:null,popupAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:new B.a.Point(18,18),className:"leaflet-div-icon"}),F=new B.a.Icon({iconUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_black_circle_icon.png",iconRetinaUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_black_circle_icon.png",iconAnchor:null,popupAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:new B.a.Point(18,18),className:"leaflet-div-icon"}),G=new B.a.Icon({iconUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_blue_circle_icon.png",iconRetinaUrl:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/afganistan_blue_circle_icon.png",iconAnchor:null,popupAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:new B.a.Point(18,18),className:"leaflet-div-icon"}),H=Object(c.b)((function(e){return{layers:e.layers}}),(function(e){return Object(l.a)({addBounds:f,zoomChange:v,setLevel:A},e)}))((function(e){e.layers.map((function(e){e.icon})),B.a.Icon.Default.imagePath="https://raw.githubusercontent.com/ValeriaBelousova/3d-model/master/";Object(n.useRef)();var t="https://geo.emg24.ru/geoserver/publiclayers/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=publiclayers%3Argnpol_afganistan_1_may_2021&maxFeatures=350&outputFormat=application%2Fjson",a="https://geo.emg24.ru/geoserver/publiclayers/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=publiclayers%3Aafganistan_june_2021&maxFeatures=350&outputFormat=application%2Fjson",s="https://geo.emg24.ru/geoserver/publiclayers/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=publiclayers%3Aafganistan_august_2021&maxFeatures=350&outputFormat=application%2Fjson";return Object(M.jsxs)(h.a,{center:e.layers[0].center,zoom:e.layers[0].zoom,minZoom:6,maxZoom:8,onViewportChange:function(t){console.log(e.layers[0].zoom),t.zoom!=e.layers[0].zoom&&(e.zoomChange(t.zoom),e.layers[0].zoom<=5&&!1===e.layers[0].zoom_change?e.setLevel("M10"):e.layers[0].zoom>5&&e.layers[0].zoom<=7?e.setLevel("M05"):e.layers[0].zoom>7&&e.layers[0].zoom<=10&&e.setLevel("M01"))},children:[Object(M.jsx)(b.a,{layers:"baselayers:afganistan_base",url:"https://geo.emg24.ru/geoserver/baselayers/wms",transparent:!0,format:"image/png"}),e.layers.map((function(e){var n=e.status_date;return console.log("status_date from props",n),"neutral"==n?Object(M.jsxs)(m.a,{children:[Object(M.jsx)(P,{id:n,url:t},n),Object(M.jsx)(_.a,{icon:G,position:[34.53278,69.16583],children:Object(M.jsx)(O.a,{offset:[-5,10],opacity:1,className:"blue_tooltip",permanent:!0,children:Object(M.jsx)("span",{children:"\u041a\u0430\u0431\u0443\u043b"})})})]}):"1_may_2021"==n?Object(M.jsxs)(m.a,{children:[Object(M.jsx)(P,{id:n,url:t},n),Object(M.jsx)(_.a,{icon:U,position:[34.53278,69.16583],children:Object(M.jsx)(O.a,{offset:[-5,10],opacity:1,className:"red_tooltip",permanent:!0,children:Object(M.jsx)("span",{children:"\u041a\u0430\u0431\u0443\u043b"})})})]}):"june_2021"==n?Object(M.jsxs)(m.a,{children:[Object(M.jsx)(P,{id:n,url:a},n),Object(M.jsx)(_.a,{icon:U,position:[34.52023,69.179961],children:Object(M.jsx)(O.a,{className:"red_tooltip",permanent:!0,children:Object(M.jsx)("span",{children:"\u041a\u0430\u0431\u0443\u043b"})})}),Object(M.jsx)(_.a,{icon:F,position:[36.7089,67.1108],children:Object(M.jsx)(O.a,{className:"black_tooltip",permanent:!0,children:Object(M.jsx)("span",{children:"\u041c\u0430\u0437\u0430\u0440\u0438-\u0428\u0430\u0440\u0438\u0444"})})})]}):"july_2021"==n?Object(M.jsxs)(m.a,{children:[Object(M.jsx)(P,{id:n,url:t},n),Object(M.jsx)(_.a,{icon:U,position:[34.52023,69.179961],children:Object(M.jsx)(O.a,{className:"red_tooltip",permanent:!0,children:Object(M.jsx)("span",{children:"\u041a\u0430\u0431\u0443\u043b"})})}),Object(M.jsx)(_.a,{icon:T,position:[34.96667,69.29278],children:Object(M.jsx)(y.a,{className:"icon-leave",children:Object(M.jsxs)(x.a,{style:{width:"18rem"},children:[Object(M.jsx)(x.a.Img,{variant:"top",src:"https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/nato.jpg"}),Object(M.jsxs)(x.a.Body,{children:[Object(M.jsx)(x.a.Title,{children:"\u0411\u0430\u0433\u0440\u0430\u043c"}),Object(M.jsx)(x.a.Text,{children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0432\u043e\u0435\u043d\u043d\u044b\u0435 \u0421\u0428\u0410 \u0443\u0448\u043b\u0438 \u0441 \u0430\u0432\u0438\u0430\u0431\u0430\u0437\u044b \u0432 \u0411\u0430\u0433\u0440\u0430\u043c\u0435. \u041f\u043e\u0447\u0435\u043c\u0443 \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u043e \u0438 \u0447\u0435\u043c \u043e\u043f\u0430\u0441\u043d\u043e?"}),Object(M.jsx)(g.a,{variant:"dark",href:"https://www.kommersant.ru/doc/4888993",target:"_blank",children:"\u0427\u0438\u0442\u0430\u0442\u044c"})]})]})})})]}):"august_2021"==n?Object(M.jsxs)(m.a,{children:[Object(M.jsx)(P,{id:n,url:s},n),Object(M.jsx)(_.a,{icon:F,position:[34.52023,69.179961],children:Object(M.jsx)(O.a,{className:"black_tooltip",permanent:!0,children:Object(M.jsx)("span",{children:"\u041a\u0430\u0431\u0443\u043b"})})})]}):"september_2021"==n?Object(M.jsxs)(m.a,{children:[Object(M.jsx)(P,{id:n,url:s},n),Object(M.jsx)(_.a,{icon:U,position:[35.445,69.752],children:Object(M.jsx)(O.a,{className:"red_tooltip",permanent:!0,children:Object(M.jsx)("span",{children:"\u0411\u0430\u0437\u0430\u0440\u0430\u043a"})})}),Object(M.jsx)(_.a,{icon:F,position:[34.52023,69.179961],children:Object(M.jsx)(O.a,{className:"black_tooltip",permanent:!0,children:Object(M.jsx)("span",{children:"\u041a\u0430\u0431\u0443\u043b"})})})]}):void 0}))]})})),L=a(29),D=(a(44),a(26),function(e){return{type:"TOOLS_TOOL_CHOOSE",payload:{toolChange:e}}}),I=function(e){return{type:"AFGANISTAN_STATUS_DATE",payload:{status_date:e}}},V=function(e){return{type:"MAP_CENTER_CHANGE",payload:{center:e}}},Z=function(e){return console.log(e),"july_2021"===e.status?Object(M.jsx)("p",{children:"\u0412\u043e\u0439\u0441\u043a\u0430 \u041d\u0410\u0422\u041e \u043f\u043e\u043a\u0438\u0434\u0430\u044e\u0442 \u0411\u0430\u0433\u0440\u0430\u043c"}):"september_2021"===e.status?Object(M.jsx)("p",{children:"\u0421\u0438\u043b\u044b \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0434\u0438\u0441\u043b\u043e\u0446\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c \u0432 \u041f\u0430\u043d\u0434\u0436\u0448\u0435\u0440"}):"june_2021"===e.status?Object(M.jsx)("p",{children:"\u0410\u043a\u0442\u0438\u0432\u0438\u0437\u0430\u0446\u0438\u044f \u0422\u0430\u043b\u0438\u0431\u0430\u043d"}):"august_2021"===e.status?Object(M.jsx)("p",{children:"\u041e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435 \u0438 \u0432\u0437\u044f\u0442\u0438\u0435 \u041a\u0430\u0431\u0443\u043b\u0430. \u0411\u0435\u0433\u0441\u0442\u0432\u043e \u043f\u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u0430 \u0410\u0448\u0440\u0430\u0444\u0430 \u0413\u0430\u043d\u0438"}):"1_may_2021"===e.status?Object(M.jsx)("p",{children:"\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u044b\u0432\u043e\u0434\u0430 \u0432\u043e\u043e\u0440\u0443\u0436\u0451\u043d\u043d\u044b\u0445 \u0441\u0438\u043b \u041d\u0410\u0422\u041e"}):(console.log("not return p el"),null)},R=(a(45),Object(c.b)((function(e){return{layers:e.layers}}),(function(e){return Object(l.a)({setTool:D,setStatus_Date:I,setZoom:v,setCenter:V},e)}))((function(e){var t=function(t){console.log("e.target.id",t.target.id),console.log("props before",e.layers[2]),"july_2021"==t.target.id?(e.setZoom(7),e.setCenter([35.874495,68.928351])):"september_2021"==t.target.id?(e.setZoom(8),e.setCenter([34.994495,68.928351])):"june_2021"==t.target.id||"august_2021"==t.target.id?(e.setZoom(6.5),e.setCenter([34.674495,68.928351])):"1_may_2021"!=t.target.id&&"neutral"!=t.target.id||(e.setCenter([34.00863,66.000947]),e.setZoom(6)),e.setStatus_Date(t.target.id),console.log("props after",e.layers[2])};return Object(M.jsx)("div",{className:"tools",children:Object(M.jsx)(x.a.Body,{children:Object(M.jsx)("div",{className:"container mt-0 mb-0",children:Object(M.jsx)("div",{className:"row",children:Object(M.jsxs)("div",{className:"col-md-0 offset-md-0",children:[Object(M.jsx)("h4",{onClick:t,id:"neutral",children:"\u0412\u043e\u0439\u043d\u0430 \u0432 \u0410\u0444\u0433\u0430\u043d\u0438\u0441\u0442\u0430\u043d\u0435"}),Object(M.jsxs)("ul",{className:"timeline",children:[Object(M.jsxs)("li",{onClick:t,id:"1_may_2021",children:[Object(M.jsx)("h5",{onClick:t,id:"1_may_2021",children:"1 \u043c\u0430\u044f 2021"}),"1_may_2021"===e.layers[2].status_date?Object(M.jsx)(Z,{status:"1_may_2021"}):null]}),Object(M.jsxs)("li",{onClick:t,id:"june_2021",children:[Object(M.jsx)("h5",{onClick:t,id:"june_2021",children:"\u0418\u044e\u043d\u044c 2021"}),"june_2021"===e.layers[2].status_date?Object(M.jsx)(Z,{status:"june_2021"}):null]}),Object(M.jsxs)("li",{onClick:t,id:"july_2021",children:[Object(M.jsx)("h5",{onClick:t,id:"july_2021",children:"\u0418\u044e\u043b\u044c 2021"}),"july_2021"===e.layers[2].status_date?Object(M.jsx)(Z,{status:"july_2021"}):null]}),Object(M.jsxs)("li",{onClick:t,id:"august_2021",children:[Object(M.jsx)("h5",{onClick:t,id:"august_2021",children:"\u0410\u0432\u0433\u0443\u0441\u0442 2021"}),"august_2021"===e.layers[2].status_date?Object(M.jsx)(Z,{status:"august_2021"}):null]}),Object(M.jsxs)("li",{onClick:t,id:"september_2021",children:[Object(M.jsx)("h5",{onClick:t,id:"september_2021",children:"5 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f 2021"}),"september_2021"===e.layers[2].status_date?Object(M.jsx)(Z,{status:"september_2021"}):null]})]})]})})})})})}))),Y=Object(c.b)((function(e){return{layers:e.layers}}))((function(e){var t=Object(n.useState)(e.layers[1].downloadChecked),a=Object(L.a)(t,2);a[0],a[1];return Object(M.jsx)("div",{className:"toolbox",children:Object(M.jsx)(R,{})})})),J=Object(c.b)((function(e){return{layers:e.layers}}))((function(e){return Object(M.jsxs)("div",{className:"page_iframe",children:[Object(M.jsx)(Y,{}),Object(M.jsx)("div",{className:"mapAfganistan",children:Object(M.jsx)(H,{})})]})}));var q=Object(c.b)((function(e){return{layers:e.layers}}))((function(){return document.title="Geo Server",Object(M.jsx)("div",{className:"app",children:Object(M.jsx)(J,{})})}));r.a.render(Object(M.jsx)(c.a,{store:p,children:Object(M.jsx)(s.a.StrictMode,{children:Object(M.jsx)(q,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.b484c264.chunk.js.map